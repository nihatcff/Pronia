@model List<ProductGetVM>

<div class="container">
	<div class="row">

		<div class="col-4"><h2>Products</h2></div>
		<a class="btn btn-success" asp-action="Create">Create</a>
		<table class="table table-hover table-dark">
			<thead>
				<tr>
					<th scope="col">Id</th>
					<th scope="col">Name</th>
					<th scope="col">Description</th>
					<th scope="col">Main Image Path</th>
					<th scope="col">Hover Image Path</th>
					<th scope="col">Price</th>
					<th scope="col">Category Name</th>
					<th scope="col">Actions</th>
				</tr>
			</thead>
			<tbody>

				@foreach (ProductGetVM product in Model)
				{
					<tr>
						<th scope="row">@product.Id</th>
						<td>@product.Name</td>
						<td>@product.Description</td>
						<td> <img src="~/assets/images/website-images/@product.MainImagePath" width="30" height="30" alt="Alternate Text" /></td>
						<td> <img src="~/assets/images/website-images/@product.HoverImagePath" width="30" height="30" alt="Alternate Text" /></td>
						<td>@product.Price</td>
						<td>@product.CategoryName</td>

						<td>
							<a asp-action="Detail" asp-route-id="@product.Id" class="btn btn-primary"><i class="fa-solid fa-info"></i></a>
							<a asp-action="Delete" asp-route-id="@product.Id" class="btn btn-danger deleteBtn"><i class="fa-solid fa-trash-can"></i></a>
							<a asp-action="Update" asp-route-id="@product.Id" class="btn btn-success"><i class="fa-solid fa-pen-to-square"></i>	</a>
						</td>

					</tr>
				}



			</tbody>
		</table>
	</div>
</div>

<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

<script>
	document.addEventListener("DOMContentLoaded", function () {

		const deleteButtons = document.querySelectorAll(".deleteBtn");

		deleteButtons.forEach(function (btn) {
			btn.addEventListener("click", function (e) {
				e.preventDefault();

				const url = this.getAttribute("href");

				Swal.fire({
					title: "Are you sure?",
					text: "You won't be able to revert this!",
					icon: "warning",
					showCancelButton: true,
					confirmButtonColor: "#3085d6",
					cancelButtonColor: "#d33",
					confirmButtonText: "Yes, delete it!"
				}).then((result) => {
					if (result.isConfirmed) {
						window.location.href = url;
					}
				});
			});
		});

	});
</script>